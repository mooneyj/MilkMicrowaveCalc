<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Milk Warmer Calculator</title>
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#ffffff">
    <link rel="apple-touch-icon" href="/icon-192x192.png">
    <style>
        body { font-family: Arial, sans-serif; max-width: 300px; margin: 0 auto; padding: 20px; }
        input, button { display: block; width: 100%; margin: 10px 0; padding: 5px; }
        #result { margin-top: 20px; font-weight: bold; }
    </style>
</head>
<body>
    <h1>Milk Warmer Calculator</h1>
    <form id="calculator">
        <label for="quantity">Milk quantity (ml):</label>
        <input type="number" id="quantity" min="30" max="1000" required>
        
        <label for="startTemp">Starting temperature (°C):</label>
        <input type="number" id="startTemp" value="3" step="0.1">
        
        <button type="submit">Calculate</button>
    </form>
    <div id="result"></div>

    <script>
        // Calculator functionality
        document.getElementById('calculator').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const volume = parseFloat(document.getElementById('quantity').value);
            const startTemp = parseFloat(document.getElementById('startTemp').value);
            
            const a = 0.00919; // seconds per mL
            const b = 1; // seconds per °C of temperature rise
            const targetTemp = 37;
            
            let time = a * volume + b * (targetTemp - startTemp);
            time = Math.ceil(time);
            
            document.getElementById('result').textContent = `Microwave time: ${time} seconds`;
        });

        // Immediate calculation on input change
        document.getElementById('quantity').addEventListener('input', calculateTime);
        document.getElementById('startTemp').addEventListener('input', calculateTime);

        function calculateTime() {
            const volume = parseFloat(document.getElementById('quantity').value);
            const startTemp = parseFloat(document.getElementById('startTemp').value);
            
            if (isNaN(volume) || isNaN(startTemp)) {
                document.getElementById('result').textContent = 'Please enter valid numbers';
                return;
            }

            const a = 0.00919; // seconds per mL
            const b = 1; // seconds per °C of temperature rise
            const targetTemp = 37;
            
            let time = a * volume + b * (targetTemp - startTemp);
            time = Math.ceil(time);
            
            document.getElementById('result').textContent = `Microwave time: ${time} seconds`;
        }

        // Service Worker registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('Service Worker registered successfully:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Service Worker registration failed:', error);
                    });
            });
        }
    </script>
</body>
</html>
